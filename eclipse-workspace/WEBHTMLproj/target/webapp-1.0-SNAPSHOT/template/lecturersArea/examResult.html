<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Exams grade</title>
<style>
.no-link-style {
	text-decoration: none;
	color: inherit;
	cursor: default;
}
</style>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
	crossorigin="anonymous">

</head>
<body>

	<div class="container my-5">
		<div class="row">
			<div class="col-md-9 mx-auto shadow p-4 rounded bg-light">
				<h1 class="display-5">Risultati dell'appello</h1>
				<div th:if="${anyResult == null or anyResult == false}"
					class="alert alert-danger" role="alert">Nessun voto per
					l'appello selezionato</div>
				<div th:if="${anyResult != null and anyResult == true}">
					<form th:action="@{/pendingGradeLoader}" method="post">
						<input th:value="${idAppello}" name="idExam" hidden> <input
							th:value="${nomeCorso}" name="courseName" hidden>
						<table class="table">
							<thead>
								<tr>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appelloId=${idAppello}, sortBy='idStudent', dir=${sortBy == 'idStudent' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style">Matricola</a></th>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appelloId=${idAppello}, sortBy='name', dir=${sortBy == 'name' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style">Nome</a></th>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appelloId=${idAppello}, sortBy='surname', dir=${sortBy == 'surname' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style">Cognome</a></th>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appelloId=${idAppello}, sortBy='email', dir=${sortBy == 'email' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style">Email</a></th>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appelloId=${idAppello}, sortBy='result', dir=${sortBy == 'result' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style"> Risultato </a></th>
									<th scope="col"><a
										th:href="@{/orderTable(courseName =${nomeCorso},appolloId=${idAppello}, sortBy='status', dir=${sorBy == 'status' and dir == 'asc' ? 'desc' : 'asc'})}"
										class="no-link-style">Stuatus</a></th>

								</tr>
							</thead>
							<tbody>
								<tr th:each="risultato: ${risultati}">
									<td th:value="${risultato.getIdStud()}"
										th:text="${risultato.getIdStud()}"></td>
									<td th:value="${risultato.getNameStud().toLowerCase()}"
										th:text="${risultato.getNameStud()}"></td>
									<td th:value="${risultato.getSurnameStud().toLowerCase()}"
										th:text="${risultato.getSurnameStud()}"></td>
									<td th:value="${risultato.getEmail().toLowerCase()}"
										th:text="${risultato.getEmail()}"></td>
									<td
										th:value="${risultato.getGrade() == null ? 'nullo' : risultato.getGrade()}"
										th:text="${risultato.getGrade()}"></td>
									<td th:value="${risultato.getStatus().toLowerCase()}"
										th:text="${risultato.getStatus()}"></td>
									<input name="idStudenti" value="${risultato.getIdStud()}" hidden>
								</tr>
							</tbody>
						</table>
						<button type="submit" value="addGrades" name="azione"
							class="btn btn-primary">Aggiungi voti</button>
						<button type="submit" value="publish" name="azione"
							class="btn btn-success">Pubblica voti</button>
						<button th:if = "${canVerbalize != null and canVerbalize == true}" type="submit" value="verbalizza" name="azione"
							class="btn btn-warning">Verbalizza</button>
					</form>

				</div>
			</div>
		</div>
	</div>
</body>
</html>